<h3 class="mat-h3">ISSUES</h3>

<mat-form-field>
  <input matInput
    placeholder="Filter issues"
    (keyup)="applyFilter($event.target.value)">
</mat-form-field>

<table *ngIf="view === 'normal'"
  mat-table [dataSource]="dataSource" matSort
  class="mat-elevation-z2">

  <ng-container matColumnDef="key">
    <th mat-header-cell class="issue" mat-sort-header *matHeaderCellDef>Issue</th>
    <td mat-cell class="name" *matCellDef="let issue">
      {{issue.key}}<br />
      {{issue.summary}}
    </td>
  </ng-container>

  <ng-container matColumnDef="typeId">
    <th mat-header-cell class="type" mat-sort-header *matHeaderCellDef>Type</th>
    <td mat-cell *matCellDef="let issue" class="type">{{issue.typeId}}</td>
  </ng-container>

  <ng-container matColumnDef="priorityId">
    <th mat-header-cell mat-sort-header class="priority" *matHeaderCellDef>Priority</th>
    <td mat-cell class="priority" *matCellDef="let issue">{{issue.priorityId}}</td>
  </ng-container>

  <ng-container matColumnDef="statusId">
    <th mat-header-cell mat-sort-header class="status" *matHeaderCellDef>Status</th>
    <td mat-cell class="status" *matCellDef="let issue">{{issue.statusId}}</td>
  </ng-container>

  <ng-container matColumnDef="resolutionId">
    <th mat-header-cell mat-sort-header class="resolution" *matHeaderCellDef>Resolution</th>
    <td mat-cell class="resolution" *matCellDef="let issue">{{issue.resolutionId}}</td>
  </ng-container>

  <ng-container matColumnDef="action">
    <th mat-header-cell class="action" *matHeaderCellDef></th>
    <td mat-cell class="action" *matCellDef="let issue">
      <button mat-icon-button
        [routerLink]="'/issue/' + issue.id"
        aria-label="View issue details"
        >VIEW</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="normalCols; sticky: true"></tr>
  <tr mat-row class="normal"
    *matRowDef="let row; columns: normalCols;"
  ></tr>
</table>

<table *ngIf="view === 'compact'"
  mat-table matSort
  class="mat-elevation-z2"
  [dataSource]="dataSource">

  <ng-container matColumnDef="key">
    <th mat-header-cell class="issue" mat-sort-header *matHeaderCellDef>Issue</th>
    <td mat-cell class="name" *matCellDef="let issue">
      {{issue.key}}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="compactCols; sticky: true"></tr>
  <tr mat-row class="compact"
    *matRowDef="let row; columns: compactCols;"
    (click)="onIssueClick(row.id)"
  ></tr>
</table>
